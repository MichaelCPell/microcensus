<app-navigation></app-navigation>
<div class="container-fluid">
  <div class="row report-title-row">
    <div class="col-md-3 col-sm-3 centered">
      <h3 class="dashboard-subtitle">Dashboard</h3>
    </div>
    <div class="col-md-5 col-md-offset-1">
      <!-- <p class="dashboard-text ">{{user.locationsRemaining}} locations remaining<span><a href=""> Get More</a></span></p> -->
    </div>
    <div class="col-md-3 col-sm-3">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Your Search" aria-describedby="basic-addon2" [(ngModel)]="search">
        <span class="input-group-addon btn btn-mc-blue" id="basic-addon2">FIND</span>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid">
  <div class="row second-row">
    <div class="col-md-4 col-sm-6 col-xs-12"
      *ngFor="let location of (user.locations | async | lfilter : 'address' : search)">
      <div class="row dashboard-gray-box">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <table class="table table-condensed">
            <thead>
              <tr>
                <th>
                  <div class="row">
                    <div class="col-sm-10 col-xs-10">
                      <h4 class="table-title">{{location.name}}</h4>
                    </div>
                    <div class="col-sm-1 col-xs-1">
                      <h4 class="table-title">
                        <i
                          (click)="makeReportWithLocation(location)"
                          class="fa fa-plus-circle" aria-hidden="true"></i>
                      </h4>
                    </div>
                  </div>
                  </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let report of (location.reports | values)">
                <td>
                  <div class="row" >
            		    <div class="col-sm-7 col-xs-5"><p class="table-text">{{report.reportName}}</p></div>
            		    <div class="col-sm-3 col-xs-4"><p class="table-text"><small>{{report.createdAt | date:'shortDate'}}</small></p></div>
                    <div class="col-sm-2 col-xs-3">
                      <a target="_blank" href="{{report.publicUrl}}"><p class="table-text centered">View</p></a>
                    </div>
            		  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
